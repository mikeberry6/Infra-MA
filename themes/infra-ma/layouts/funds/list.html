{{ define "main" }}
<section class="section">
  <div class="container">
    <h1 class="page-title">Tracked Funds</h1>
    <p class="page-subtitle">{{ with .Site.Data.funds }}{{ len . }}{{ else }}0{{ end }} infrastructure funds under coverage</p>

    <div class="fund-search-bar">
      <input type="text" id="fund-search" class="filter-input" placeholder="Search funds...">
    </div>

    {{ with .Site.Data.funds }}
    <div id="fund-grid" class="fund-grid">
      {{ range . }}
      {{ $fundDeals := where ($.Site.RegularPages) "Params.buyer" . }}
      <a href="{{ "funds/" | relURL }}{{ . | urlize }}/" class="fund-card" data-name="{{ . | lower }}">
        <span class="fund-card-name">{{ . }}</span>
        {{ if $fundDeals }}
        <span class="fund-card-count">{{ len $fundDeals }}</span>
        {{ end }}
      </a>
      {{ end }}
    </div>
    {{ else }}
    <div class="empty-state">
      <p>No funds tracked yet.</p>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}
