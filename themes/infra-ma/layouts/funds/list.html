{{ define "main" }}
<section class="page-hero">
  <div class="container">
    <p class="page-hero-eyebrow">Directory</p>
    <h1 class="page-hero-title">Tracked <span class="page-hero-title-accent">Funds</span></h1>
    <p class="page-hero-subtitle">{{ with .Site.Data.funds }}{{ len . }}{{ else }}0{{ end }} infrastructure funds under coverage</p>
    <div class="page-hero-divider"></div>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="fund-search-bar">
      <label for="fund-search" class="sr-only">Search funds</label>
      <input type="text" id="fund-search" placeholder="Search funds...">
    </div>

    {{ with .Site.Data.funds }}
    <div id="fund-grid" class="fund-grid reveal-stagger">
      {{ range . }}
      {{ $fundDeals := where ($.Site.RegularPages) "Params.buyer" . }}
      <a href="{{ "funds/" | relURL }}{{ . | urlize }}/" class="fund-card" data-name="{{ . | lower }}">
        <span class="fund-card-name">{{ . }}</span>
        <span class="fund-card-count{{ if not $fundDeals }} fund-card-no-deals{{ end }}">{{ if $fundDeals }}{{ len $fundDeals }}{{ else }}0{{ end }}</span>
      </a>
      {{ end }}
    </div>
    {{ else }}
    <div class="empty-state">
      <div class="empty-state-icon">&#x1F3E6;</div>
      <h3 class="empty-state-title">No funds tracked</h3>
      <p>Fund directory will appear here once configured.</p>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}
