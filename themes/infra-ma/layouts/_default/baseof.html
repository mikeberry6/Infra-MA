<!DOCTYPE html>
<html lang="en">
<head>
  {{ partial "head.html" . }}
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  {{/* Gradient Mesh Background */}}
  <div class="gradient-mesh" aria-hidden="true">
    <div class="gradient-mesh-blob"></div>
    <div class="gradient-mesh-blob"></div>
    <div class="gradient-mesh-blob"></div>
    <div class="gradient-mesh-blob"></div>
  </div>

  {{ partial "nav.html" . }}
  <main class="main" id="main-content">
    {{ block "main" . }}{{ end }}
  </main>
  {{ partial "footer.html" . }}

  {{/* Command Palette */}}
  <div class="cmdpal-overlay" id="cmdpal">
    <div class="cmdpal">
      <div class="cmdpal-input-wrap">
        <svg class="cmdpal-icon" viewBox="0 0 20 20" width="20" height="20"><circle cx="8.5" cy="8.5" r="5.75" fill="none" stroke="currentColor" stroke-width="2"/><line x1="13" y1="13" x2="17" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        <input class="cmdpal-input" id="cmdpal-input" type="text" placeholder="Search deals, sectors, funds..." autocomplete="off" spellcheck="false" aria-label="Search deals, sectors, funds">
      </div>
      <div class="cmdpal-results" id="cmdpal-results"></div>
      <div class="cmdpal-footer">
        <span><kbd>&uarr;&darr;</kbd> navigate</span>
        <span><kbd>&crarr;</kbd> open</span>
        <span><kbd>esc</kbd> close</span>
      </div>
    </div>
  </div>

  {{/* Search index for command palette */}}
  <script id="search-data" type="application/json">
  {{ $items := slice }}
  {{ range where .Site.RegularPages "Section" "deals" }}
    {{ $items = $items | append (dict "title" .Title "url" .RelPermalink "type" "deal" "sector" (.Params.sector | default "") "buyer" (.Params.buyer | default "") "date" (.Date.Format "Jan 2006")) }}
  {{ end }}
  {{ range $name, $sector := .Site.Data.sectors }}
    {{ $items = $items | append (dict "title" $name "url" (printf "sectors/%s/" ($name | urlize)) "type" "sector" "color" $sector.color) }}
  {{ end }}
  {{ range .Site.Data.funds }}
    {{ $items = $items | append (dict "title" . "url" (printf "funds/%s/" (. | urlize)) "type" "fund") }}
  {{ end }}
  {{ $items | jsonify }}
  </script>

  <script src="{{ "js/main.js" | relURL }}"></script>
</body>
</html>
