{{/* Deal card component — expects a page context (a deal page) */}}
{{ $sector := .Params.sector | default "" }}
{{ $status := .Params.status | default "announced" }}
<a href="{{ .RelPermalink }}" class="deal-card" data-sector="{{ $sector }}">
  {{/* Status pill — top-right corner */}}
  <span class="deal-card__status-pill deal-card__status-pill--{{ urlize $status }}">
    <span class="deal-card__status-dot deal-card__status-dot--{{ urlize $status }}"></span>
    {{ $status }}
  </span>

  {{/* Value banner */}}
  {{ with .Params.deal_value }}
  <div class="deal-card__value-banner">
    <span class="deal-card__value">{{ . }}</span>
  </div>
  {{ end }}

  <div class="deal-card__body">
    {{/* Title */}}
    <h3 class="deal-card__title">{{ .Title }}</h3>

    {{/* Buyer → Seller row */}}
    <div class="deal-card__parties">
      {{ with .Params.buyer }}
      <div class="deal-card__party">
        <span class="deal-card__avatar" aria-hidden="true">{{ substr . 0 1 }}</span>
        <span class="deal-card__party-name">{{ . }}</span>
      </div>
      {{ end }}
      {{ if and .Params.buyer .Params.seller }}
      <span class="deal-card__arrow" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
      </span>
      {{ end }}
      {{ with .Params.seller }}
      <div class="deal-card__party">
        <span class="deal-card__avatar" aria-hidden="true">{{ substr . 0 1 }}</span>
        <span class="deal-card__party-name">{{ . }}</span>
      </div>
      {{ end }}
    </div>

    {{/* Badges */}}
    <div class="deal-card__badges">
      {{ with $sector }}
      <span class="deal-card__sector sector-badge--{{ urlize . }}">{{ . }}</span>
      {{ end }}
      {{ with .Params.geography }}
      <span class="deal-card__geo">{{ . }}</span>
      {{ end }}
    </div>

    {{/* Footer row: date + monospace value */}}
    <div class="deal-card__footer">
      <time class="deal-card__date" datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
      {{ with .Params.geography }}
      <span class="deal-card__geo-tag">{{ . }}</span>
      {{ end }}
    </div>
  </div>
</a>
